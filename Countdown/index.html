<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Countdown</title>
	<link rel="stylesheet" href="./css/index.css">
	<script src="./js/changeLink.js"></script>
	<script src="./js/findDay.js"></script>
	<script src="./js/findYear.js"></script>
	<script src="./js/findLast.js"></script>
	<script src="./js/Readable.js"></script>
	<script src="./js/cssVarChange.js"></script>
	<script src="./js/countdown2.js"></script>
</head>
<body>
	<div id="menu">
	<h1>Pick a countdown...</h1>
	<p id="Labels">
		<a id="New Years Day"></a><br>
		<a id="Martin Luther King Jr. Day"></a><br>
		<a id="George Washington's Birthday"></a><br>
		<a id="Memorial Day"></a><br>
		<a id="Independence Day"></a><br>
		<a id="Labor Day"></a><br>
		<a id="Columbus Day"></a><br>
		<a id="Veterans Day"></a><br>
		<a id="Thanksgiving Day"></a><br>
		<a id="Christmas Day"></a><br>
		<a id="Test"></a><br>
	</p>
	<h1>...or make your own</h1>
	<form>
		Date:
		<select id="month" name=1>
			<option value=0>January</option>
			<option value=1>Febuary</option>
			<option value=2>March</option>
			<option value=3>April</option>
			<option value=4>May</option>
			<option value=5>June</option>
			<option value=6>July</option>
			<option value=7>August</option>
			<option value=8>September</option>
			<option value=9>October</option>
			<option value=10>November</option>
			<option value=11>December</option>
		</select>
		<select id="day" name=2>
			<option value=1>1</option>
			<option value=2>2</option>
			<option value=3>3</option>
			<option value=4>4</option>
			<option value=5>5</option>
			<option value=6>6</option>
			<option value=7>7</option>
			<option value=8>8</option>
			<option value=9>9</option>
			<option value=10>10</option>
			<option value=11>11</option>
			<option value=12>12</option>
			<option value=13>13</option>
			<option value=14>14</option>
			<option value=15>15</option>
			<option value=16>16</option>
			<option value=17>17</option>
			<option value=18>18</option>
			<option value=19>19</option>
			<option value=20>20</option>
			<option value=21>21</option>
			<option value=22>22</option>
			<option value=23>23</option>
			<option value=24>24</option>
			<option value=25>25</option>
			<option value=26>26</option>
			<option value=27>27</option>
			<option value=28>28</option>
			<option value=29>29</option>
			<option value=30>30</option>
			<option value=31>31</option>
		</select>
		, 
		<select id="year" name=0>
			<option id=0></option>
			<option id=1></option>
			<option id=2></option>
			<option id=3></option>
			<option id=4></option>
			<option id=5></option>
		</select>
		<br>
		Time:
		<select id="hour" name=3>
			<option value=0>24</option>
			<option value=1>1</option>
			<option value=2>2</option>
			<option value=3>3</option>
			<option value=4>4</option>
			<option value=5>5</option>
			<option value=6>6</option>
			<option value=7>7</option>
			<option value=8>8</option>
			<option value=9>9</option>
			<option value=10>10</option>
			<option value=11>11</option>
			<option value=12>12</option>
			<option value=13>13</option>
			<option value=14>14</option>
			<option value=15>15</option>
			<option value=16>16</option>
			<option value=17>17</option>
			<option value=18>18</option>
			<option value=19>19</option>
			<option value=20>20</option>
			<option value=21>21</option>
			<option value=22>22</option>
			<option value=23>23</option>
		</select>
		:
		<select id="minute" name=4>
			<option value=0>00</option>
			<option value=1>01</option>
			<option value=2>02</option>
			<option value=3>03</option>
			<option value=4>04</option>
			<option value=5>05</option>
			<option value=6>06</option>
			<option value=7>07</option>
			<option value=8>08</option>
			<option value=9>09</option>
			<option value=10>10</option>
			<option value=11>11</option>
			<option value=12>12</option>
			<option value=13>13</option>
			<option value=14>14</option>
			<option value=15>15</option>
			<option value=16>16</option>
			<option value=17>17</option>
			<option value=18>18</option>
			<option value=19>19</option>
			<option value=20>20</option>
			<option value=21>21</option>
			<option value=22>22</option>
			<option value=23>23</option>
			<option value=24>24</option>
			<option value=25>25</option>
			<option value=26>26</option>
			<option value=27>27</option>
			<option value=28>28</option>
			<option value=29>29</option>
			<option value=30>30</option>
			<option value=31>31</option>
			<option value=32>32</option>
			<option value=33>33</option>
			<option value=34>34</option>
			<option value=35>35</option>
			<option value=36>36</option>
			<option value=37>37</option>
			<option value=38>38</option>
			<option value=39>39</option>
			<option value=40>40</option>
			<option value=41>41</option>
			<option value=42>42</option>
			<option value=43>43</option>
			<option value=44>44</option>
			<option value=45>45</option>
			<option value=46>46</option>
			<option value=47>47</option>
			<option value=48>48</option>
			<option value=49>49</option>
			<option value=50>50</option>
			<option value=51>51</option>
			<option value=52>52</option>
			<option value=53>53</option>
			<option value=54>54</option>
			<option value=55>55</option>
			<option value=56>56</option>
			<option value=57>57</option>
			<option value=58>58</option>
			<option value=59>59</option>
		</select>
		<br>
		Name of event:
		<input type="text" name=7 id=until >
		<br>
		Message to display when timer reaches zero:
		<input type="text" name=8 id=message >
		<br>
		Background when timer reaches zero:
		<select id="background" name=9 onchange="document.getElementById('end').src = './img/' + this.value + '.gif'">
			<option value="fireworks">Fireworks</option>
			<option value="christmasTree">Christmas Tree</option>
			<option value="flag">American Flag</option>
			<option value="ship">Ship Sailing</option>
			<option value="turkey">Snoopy's Thanksgiving</option>
			<option value="birthday">Birthday Cake</option>
		</select>
		<img id="end" src="./img/fireworks.gif" style="height: 40px">
		<br>
 		<select id="hourglassselect" name=10 onchange="document.body.style.backgroundImage = 'url(./img/'+ this.value +'.gif)'; Readable()">
			<option value="Hourglass">Default</option>
			<option value="Hourglass2">Simple</option>
			<option value="Hourglass3">Swirly</option>
			<option value="HourglassChristmas">Christmasy</option>
		</select>
		<br>
		<input type="submit" value="Go!">
	</form>
	</div>
	<div id="main">
	<p id="t" class=number>
		<span id="dn" class=number></span>
		<span id="dl" class=label></span>
		<span id="hn" class=number></span>
		<span id="hl" class=label></span>
		<span id="mn" class=number></span>
		<span id="ml" class=label></span>
		<span id="sn" class=number></span>
		<span id="un" class=smallNumber></span>
		<span id="sl" class=label></span>
		<br>
		<span class=label>until</span>
		<span id="to" class=number></span>
	</p>
	</div>
	<script>
		try{
			var urlinfo = new URLSearchParams(window.location.search);
			if (urlinfo == ""){
				document.getElementById("main").innerHTML = "";
				var n = new Date();
				var i;
				changeLink("New Years Day", "0=" + findYear(n.getFullYear(), n.getMonth(), 0) + "&7=" + findYear(n.getFullYear(), n.getMonth(), 0) + "&8=Happy+New+Year");
				changeLink("Martin Luther King Jr. Day", "0=" + findYear(n.getFullYear(), n.getMonth(), 0) + "&1=0&2=" + findDay(findYear(n.getFullYear(), n.getMonth(), 0), 0, 1, 3) + "&7=Martin+Luther+King+Jr.+Day&8=Happy+Martin+Luther+King+Jr.+Day");
				changeLink("George Washington's Birthday", "0=" + findYear(n.getFullYear(), n.getMonth(), 1) + "&1=1&2=" + findDay(findYear(n.getFullYear(), n.getMonth(),  1), 1, 1, 3) + "&7=Presidents'+Day&8=Happy+Presidents'+Day");
				changeLink("Memorial Day", "0=" + findYear(n.getFullYear(), n.getMonth(), 4) + "&1=4&2=" + findLast(findYear(n.getFullYear(), n.getMonth(), 4), 4, 1) + "&7=Memorial+Day&8=Never+Forget&9=flag");
				changeLink("Independence Day", "0=" + findYear(n.getFullYear(), n.getMonth(), 6) + "&1=6&2=4&7=Independence+Day&8=Happy+Independence+Day");
				changeLink("Labor Day", "0=" + findYear(n.getFullYear(), n.getMonth(), 8) + "&1=8&2=" + findDay(findYear(n.getFullYear(), n.getMonth(), 8), 8, 1, 1) + "&7=Labor+Day&8=Happy+Labor+Day");
				changeLink("Columbus Day", "0=" + findYear(n.getFullYear(), n.getMonth(), 9) + "&1=9&2=" + findDay(findYear(n.getFullYear(), n.getMonth(), 9), 9, 1, 2) + "&7=Columbus+Day&8=Happy+Columbus+Day&9=ship");
				changeLink("Veterans Day", "0=" + findYear(n.getFullYear(), n.getMonth(), 10) + "&1=10&2=11&7=Veterans+Day&8=Never+Forget&9=flag");
				changeLink("Thanksgiving Day", "0=" + findYear(n.getFullYear(), n.getMonth(), 10) + "&1=10&2=" + findDay(findYear(n.getFullYear(), n.getMonth, 10), 10, 4, 4) + "&7=Thanksgiving&8=Happy+Thanksgiving&9=turkey");
				changeLink("Christmas Day", "0=" + findYear(n.getFullYear(), n.getMonth(), 11) + "&1=11&2=25&7=Christmas&8=Merry+Christmas&9=christmasTree");
				changeLink("Test", "0=" + n.getFullYear() + "&1=" + n.getMonth() + "&2=" + n.getDate() + "&3=" + n.getHours() + "&4=" + n.getMinutes() + "&5=" + (n.getSeconds() + 10) + "&7=Results&8=Now");
				for (i=0; i<=5; i++) {
					document.getElementById(i).value = n.getFullYear() + i;
					document.getElementById(i).innerHTML = n.getFullYear() + i;
				}
				//console.log("menu ran")
			}else{
				document.getElementById("menu").innerHTML = "";
				var info = [1970, 0, 1, 0, 0, 0, 0, "Something Happens", "Something Happened", "fireworks", "Hourglass"];
				var urlstuff = new URLSearchParams(window.location.search);
				var entries = urlstuff.entries();
				try{
					var pair;
					for(pair of entries) {
						info[pair[0]] = pair[1];
					}
				}catch(err){
					for(var i=0; i<(entries.length/2); i++){
						info[entries[i*2]] = entries[(i*2)+1];
					}
				}
				setInterval(function() {
					countdown2(info[0], info[1], info[2], info[3], info[4], info[5], info[6], info[7], info[8], 'url("./img/' + info[9] + '.gif")');
				}, 1);
				//Readable(/*info[10]*/)
				document.body.style.backgroundImage = "url(\"./img/" + info[10] + ".gif\")";
				window.addEventListener('load', function() {Readable();}, false);
				//console.log("main ran")
			}
		}catch(err){
			if (window.confirm('This version of the countdown is not supported in your browser. You will be redirected to an earlier version of the countdown program. I apologise for any inconvenience.')){
				window.location.assign("https://liambloom.github.io/NewYearCountdown2.html");
			}else{
				document.getElementById("Labels").innerHTML = "";
			}
		}
	</script>
</body>
</html>